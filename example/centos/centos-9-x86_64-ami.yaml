otk.version: "1"

otk.include.centos-9: "common/centos-9.yaml"
otk.include.centos-9-ami: "common/centos-9-ami.yaml"

otk.define.centos-9-ami-x86_64:
  architecture: "x86_64"
  kernel_opts_list:
    - "rd.blacklist=nouveau"
    - "nvme_core.io_timeout=4294967295"
  # todo: should this go into centos-9-common.yaml ? and we customize via normal "otk.defines" ?
  filesystem:
    # this will expand to "root: ...\nboot: \n"etc (i.e. a real file-systems) and "kernel_opts_list:
    # [list_item1, list_item2, ..]"
    # (i.e. define the partition table as a map of root/boot/boot-efi vars)
    # *and* it needs to undstand modifications (e.g. adding extra parititions somehow, size contraints)
    otk.external.osbuild.create_partition_table_defines:
      otk.include.ami-x86_64-partitiontable: example/centos/ami-x86_64-partitiontable.yaml
      total_size: 10G

otk.target.osbuild.ami:
  stuff: things
