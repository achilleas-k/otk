otk.version: 1

otk.define.argument:
  - version
  - architecture
  - boot_mode

# output resolved vars?
otk.define.variable:
  packages:
    otk.inc: packages/root.omnifest.yaml
  otk.inc:
    otk.var:
      concat:
        - "defaults"
        - architecture
        - version
        - "defaults.yml"
  partitions:
    ...

# output info files?
otk.meta.osbuild-composer:
  boot_mode:
    mtk.var: boot_mode
  pipelines:
    build:
      - root
  export:
    - iso

otk.meta.kiwi:
  pass: pass

otk.meta.mkosi:
  pass: pass

otk.target.osbuild:
  pipelines:
    - otk.inc: pipeline/root.omnifest.yaml
    - otk.inc: pipeline/tree.omnifest.yaml
    - otk.inc: pipeline/customize.omnifest.yaml
    - otk.inc: pipeline/image.omnifest.yaml

otk.target.kiwi:
  pass: pass

otk.target.mkosi:
  pass: pass
